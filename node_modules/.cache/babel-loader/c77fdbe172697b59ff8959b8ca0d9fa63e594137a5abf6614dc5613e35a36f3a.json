{"ast":null,"code":"import React,{useCallback,useEffect,useState}from'react';import{PostForm}from'./PostForm';import{PostList}from'./PostList';import{getUserPosts}from'../servises/posts';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export const UserPosts=_ref=>{let{userId}=_ref;const[posts,setPosts]=useState([]);useEffect(()=>{getUserPosts(userId).then(setPosts);},[userId]);// #region add, delete, update\nconst[selectedPost,setSelectedPost]=useState(null);const addPost=useCallback(post=>{setPosts(currentPosts=>{const maxId=Math.max(...currentPosts.map(post=>post.id));const id=maxId+1;return[...currentPosts,{...post,id}];});},[]);const deletePost=useCallback(postId=>{setPosts(currentPosts=>currentPosts.filter(post=>post.id!==postId));},[]);const updatePost=useCallback(updatedPost=>{setPosts(currentPosts=>{const newPosts=[...currentPosts];const index=newPosts.findIndex(post=>post.id===updatedPost.id);newPosts.splice(index,1,updatedPost);return newPosts;});},[]);// #endregion\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"title is-4\",children:[\"User \",userId,\" Posts\"]}),/*#__PURE__*/_jsx(PostList,{posts:posts}),selectedPost&&/*#__PURE__*/_jsx(PostForm,{post:selectedPost,onSubmit:updatePost,onReset:()=>setSelectedPost(null)},selectedPost===null||selectedPost===void 0?void 0:selectedPost.id)]});};","map":{"version":3,"names":["React","useCallback","useEffect","useState","PostForm","PostList","getUserPosts","jsxs","_jsxs","jsx","_jsx","UserPosts","_ref","userId","posts","setPosts","then","selectedPost","setSelectedPost","addPost","post","currentPosts","maxId","Math","max","map","id","deletePost","postId","filter","updatePost","updatedPost","newPosts","index","findIndex","splice","className","children","onSubmit","onReset"],"sources":["C:/Users/User/Downloads/Mate/typeScriptProjects/loading_data_from_server/src/components/UserPosts.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { Post } from '../types/Post';\nimport { PostForm } from './PostForm';\n\nimport { PostList } from './PostList';\nimport { getUserPosts } from '../servises/posts';\n\ntype Props = {\n  userId: number;\n};\n\nexport const UserPosts: React.FC<Props> = ({ userId }) => {\n  const [posts, setPosts] = useState<Post[]>([]);\n\n  useEffect(() => {\n    getUserPosts(userId)\n      .then(setPosts);\n  }, [userId]);\n\n  // #region add, delete, update\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n\n  const addPost = useCallback((post: Post) => {\n    setPosts(currentPosts => {\n      const maxId = Math.max(...currentPosts.map(post => post.id));\n      const id = maxId + 1;\n\n      return [...currentPosts, { ...post, id }];\n    });\n  }, []);\n\n  const deletePost = useCallback((postId: number) => {\n    setPosts(currentPosts => currentPosts.filter(post => post.id !== postId));\n  }, []);\n\n  const updatePost = useCallback((updatedPost: Post) => {\n    setPosts(currentPosts => {\n      const newPosts = [...currentPosts];\n      const index = newPosts.findIndex(post => post.id === updatedPost.id);\n\n      newPosts.splice(index, 1, updatedPost);\n\n      return newPosts;\n    });\n  }, []);\n  // #endregion\n\n  return (\n    <div className=\"box\">\n      <h2 className=\"title is-4\">User {userId} Posts</h2>\n\n      <PostList posts={posts} />\n\n      {selectedPost && (\n        <PostForm\n          key={selectedPost?.id}\n          post={selectedPost}\n          onSubmit={updatePost}\n          onReset={() => setSelectedPost(null)}\n        />\n      )}\n    </div>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE/D,OAASC,QAAQ,KAAQ,YAAY,CAErC,OAASC,QAAQ,KAAQ,YAAY,CACrC,OAASC,YAAY,KAAQ,mBAAmB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAMjD,MAAO,MAAM,CAAAC,SAA0B,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CACnD,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAS,EAAE,CAAC,CAE9CD,SAAS,CAAC,IAAM,CACdI,YAAY,CAACO,MAAM,CAAC,CACjBG,IAAI,CAACD,QAAQ,CAAC,CACnB,CAAC,CAAE,CAACF,MAAM,CAAC,CAAC,CAEZ;AACA,KAAM,CAACI,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAc,IAAI,CAAC,CAEnE,KAAM,CAAAgB,OAAO,CAAGlB,WAAW,CAAEmB,IAAU,EAAK,CAC1CL,QAAQ,CAACM,YAAY,EAAI,CACvB,KAAM,CAAAC,KAAK,CAAGC,IAAI,CAACC,GAAG,CAAC,GAAGH,YAAY,CAACI,GAAG,CAACL,IAAI,EAAIA,IAAI,CAACM,EAAE,CAAC,CAAC,CAC5D,KAAM,CAAAA,EAAE,CAAGJ,KAAK,CAAG,CAAC,CAEpB,MAAO,CAAC,GAAGD,YAAY,CAAE,CAAE,GAAGD,IAAI,CAAEM,EAAG,CAAC,CAAC,CAC3C,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,UAAU,CAAG1B,WAAW,CAAE2B,MAAc,EAAK,CACjDb,QAAQ,CAACM,YAAY,EAAIA,YAAY,CAACQ,MAAM,CAACT,IAAI,EAAIA,IAAI,CAACM,EAAE,GAAKE,MAAM,CAAC,CAAC,CAC3E,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,UAAU,CAAG7B,WAAW,CAAE8B,WAAiB,EAAK,CACpDhB,QAAQ,CAACM,YAAY,EAAI,CACvB,KAAM,CAAAW,QAAQ,CAAG,CAAC,GAAGX,YAAY,CAAC,CAClC,KAAM,CAAAY,KAAK,CAAGD,QAAQ,CAACE,SAAS,CAACd,IAAI,EAAIA,IAAI,CAACM,EAAE,GAAKK,WAAW,CAACL,EAAE,CAAC,CAEpEM,QAAQ,CAACG,MAAM,CAACF,KAAK,CAAE,CAAC,CAAEF,WAAW,CAAC,CAEtC,MAAO,CAAAC,QAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CACN;AAEA,mBACExB,KAAA,QAAK4B,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB7B,KAAA,OAAI4B,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,OAAK,CAACxB,MAAM,CAAC,QAAM,EAAI,CAAC,cAEnDH,IAAA,CAACL,QAAQ,EAACS,KAAK,CAAEA,KAAM,CAAE,CAAC,CAEzBG,YAAY,eACXP,IAAA,CAACN,QAAQ,EAEPgB,IAAI,CAAEH,YAAa,CACnBqB,QAAQ,CAAER,UAAW,CACrBS,OAAO,CAAEA,CAAA,GAAMrB,eAAe,CAAC,IAAI,CAAE,EAHhCD,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAES,EAIpB,CACF,EACE,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}