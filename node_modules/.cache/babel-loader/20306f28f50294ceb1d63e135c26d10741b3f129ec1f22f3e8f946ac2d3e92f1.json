{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./App.css';import{UsersList}from'./components/UserList';import{getUsers}from'./servises/user';import{Loader}from'./components/Loader/Loader';import{UserPosts}from'./components/UserPosts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const App=()=>{const[users,setUsers]=useState([]);const[selectedUser,setSelectedUser]=useState(null);const[loading,setLoading]=useState(false);const[errorMessage,setErrorMessage]=useState('');const[updatedAt,setUpdatedAt]=useState(new Date());useEffect(()=>{setLoading(true);setTimeout(()=>{getUsers().then(setUsers).catch(error=>setErrorMessage('Try again later')).finally(()=>setLoading(false));},1000);},[updatedAt]);function reload(){setUpdatedAt(new Date());setErrorMessage('');}return/*#__PURE__*/_jsx(\"div\",{className:\"section py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Users\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),!loading&&users.length>0&&/*#__PURE__*/_jsx(UsersList,{users:users,onSelect:setSelectedUser,selectedUserId:selectedUser===null||selectedUser===void 0?void 0:selectedUser.id}),!loading&&!errorMessage&&users.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"title is-5\",children:\"There are no users\"}),errorMessage&&/*#__PURE__*/_jsxs(\"p\",{className:\"notification is-danger\",children:[errorMessage,/*#__PURE__*/_jsx(\"button\",{onClick:reload,children:\"Reload\"})]}),selectedUser&&/*#__PURE__*/_jsx(UserPosts,{userId:selectedUser.id})]})});};export default App;","map":{"version":3,"names":["React","useEffect","useState","UsersList","getUsers","Loader","UserPosts","jsx","_jsx","jsxs","_jsxs","App","users","setUsers","selectedUser","setSelectedUser","loading","setLoading","errorMessage","setErrorMessage","updatedAt","setUpdatedAt","Date","setTimeout","then","catch","error","finally","reload","className","children","length","onSelect","selectedUserId","id","onClick","userId"],"sources":["C:/Users/User/Downloads/Mate/typeScriptProjects/loading_data_from_server/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { UsersList } from './components/UserList';\nimport { User } from './types/User';\nimport { getUsers } from './servises/user';\nimport { Loader } from './components/Loader/Loader';\nimport { UserPosts } from './components/UserPosts';\n\nexport const App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [updatedAt, setUpdatedAt] = useState(new Date());\n\n  useEffect(() => {\n    setLoading(true);\n\n    setTimeout(() => {\n      getUsers()\n        .then(setUsers)\n        .catch((error) => setErrorMessage('Try again later'))\n      .finally(() => setLoading(false));\n    }, 1000)\n  }, [updatedAt]);\n\n  function reload() {\n    setUpdatedAt(new Date());\n    setErrorMessage('');\n  }\n  return (\n    <div className=\"section py-5\">\n      <div className=\"box\">\n        <div className=\"title\">Users</div>\n        {loading && (\n           <Loader />\n        )}\n\n        {!loading && users.length > 0 && (\n          <UsersList\n          users={users}\n          onSelect={setSelectedUser}\n          selectedUserId={selectedUser?.id}\n          />\n        )}\n\n        {!loading && !errorMessage && users.length === 0 && (\n          <p className='title is-5'>There are no users</p>\n        )}\n        \n        {errorMessage && (\n          <p className='notification is-danger'>{errorMessage}\n            <button onClick={reload}>Reload</button>\n          </p>\n          \n        )}\n        \n        {selectedUser && (\n          <UserPosts userId={selectedUser.id} />\n        )}\n      </div>\n    </div>\n  );\n};\n\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,WAAW,CAClB,OAASC,SAAS,KAAQ,uBAAuB,CAEjD,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,MAAM,KAAQ,4BAA4B,CACnD,OAASC,SAAS,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,MAAO,MAAM,CAAAC,GAAa,CAAGA,CAAA,GAAM,CACjC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAS,EAAE,CAAC,CAC9C,KAAM,CAACY,YAAY,CAAEC,eAAe,CAAC,CAAGb,QAAQ,CAAc,IAAI,CAAC,CACnE,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,GAAI,CAAAoB,IAAI,CAAC,CAAC,CAAC,CAEtDrB,SAAS,CAAC,IAAM,CACdgB,UAAU,CAAC,IAAI,CAAC,CAEhBM,UAAU,CAAC,IAAM,CACfnB,QAAQ,CAAC,CAAC,CACPoB,IAAI,CAACX,QAAQ,CAAC,CACdY,KAAK,CAAEC,KAAK,EAAKP,eAAe,CAAC,iBAAiB,CAAC,CAAC,CACtDQ,OAAO,CAAC,IAAMV,UAAU,CAAC,KAAK,CAAC,CAAC,CACnC,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAE,CAACG,SAAS,CAAC,CAAC,CAEf,QAAS,CAAAQ,MAAMA,CAAA,CAAG,CAChBP,YAAY,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,CAAC,CACxBH,eAAe,CAAC,EAAE,CAAC,CACrB,CACA,mBACEX,IAAA,QAAKqB,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BpB,KAAA,QAAKmB,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBtB,IAAA,QAAKqB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,OAAK,CAAK,CAAC,CACjCd,OAAO,eACLR,IAAA,CAACH,MAAM,GAAE,CACX,CAEA,CAACW,OAAO,EAAIJ,KAAK,CAACmB,MAAM,CAAG,CAAC,eAC3BvB,IAAA,CAACL,SAAS,EACVS,KAAK,CAAEA,KAAM,CACboB,QAAQ,CAAEjB,eAAgB,CAC1BkB,cAAc,CAAEnB,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEoB,EAAG,CAChC,CACF,CAEA,CAAClB,OAAO,EAAI,CAACE,YAAY,EAAIN,KAAK,CAACmB,MAAM,GAAK,CAAC,eAC9CvB,IAAA,MAAGqB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,oBAAkB,CAAG,CAChD,CAEAZ,YAAY,eACXR,KAAA,MAAGmB,SAAS,CAAC,wBAAwB,CAAAC,QAAA,EAAEZ,YAAY,cACjDV,IAAA,WAAQ2B,OAAO,CAAEP,MAAO,CAAAE,QAAA,CAAC,QAAM,CAAQ,CAAC,EACvC,CAEJ,CAEAhB,YAAY,eACXN,IAAA,CAACF,SAAS,EAAC8B,MAAM,CAAEtB,YAAY,CAACoB,EAAG,CAAE,CACtC,EACE,CAAC,CACH,CAAC,CAEV,CAAC,CAGD,cAAe,CAAAvB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}